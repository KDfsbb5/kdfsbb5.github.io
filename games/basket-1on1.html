<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>バカストリートボール 1on1</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      margin: 0; 
      background: linear-gradient(to bottom, #ff6b35 0%, #f7931e 100%); 
      font-family: sans-serif; 
      overflow: hidden; 
    }
    canvas { 
      display: block; 
      margin: 0 auto; 
      background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 100%); 
      border: 4px solid #ff6b35;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    .instructions {
      text-align: center;
      margin: 16px;
      font-size: 1.2rem;
      color: #333;
    }
  </style>
</head>
<body>
  <h1 class="text-5xl md:text-7xl font-black text-center mb-4 pt-4 bg-gradient-to-r from-red-600 to-yellow-500 bg-clip-text text-transparent drop-shadow-2xl">
    バカストリートボール 1on1
  </h1>
  <canvas id="gameCanvas" width="800" height="500"></canvas>
  <div class="instructions">矢印キー移動・スペースでシュート　先取10点勝ち！（キャラ: チビ速固定）</div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const keys = {};

    // キャラ定義（スピードタイプで固定）
    const player = { 
      name: "チビ速", 
      color: "#ff4444", 
      speed: 7, 
      shootPower: 4, 
      height: 30, 
      dunk: false,
      x: 200, 
      y: 250 
    };

    // AI（簡単敵）
    const ai = { 
      x: 600, 
      y: 250, 
      speed: 4, 
      color: "#888" 
    };

    // ボール
    let ball = { x: 400, y: 200, vx: 0, vy: 0, holder: null };

    // スコア
    let score = { player: 0, ai: 0 };
    let gameState = "playing"; // すぐスタート

    // ボールリセット
    function resetBall() {
      ball.x = 400;
      ball.y = 100;
      ball.vx = 0;
      ball.vy = 0;
      ball.holder = Math.random() < 0.5 ? "player" : "ai";
    }

    // コート描画
    function drawCourt() {
      // 地面
      ctx.fillStyle = "#8B4513";
      ctx.fillRect(0, 0, 800, 500);

      // コート線
      ctx.strokeStyle = "white";
      ctx.lineWidth = 4;
      ctx.strokeRect(50, 100, 700, 300);

      // センターサークル
      ctx.beginPath();
      ctx.arc(400, 250, 60, 0, Math.PI * 2);
      ctx.stroke();

      // リング（シンプル）
      ctx.fillStyle = "#ffdd00";
      ctx.fillRect(350, 230, 100, 4);
    }

    // プレイヤー描画
    function drawPlayer(x, y, height, color, name) {
      ctx.fillStyle = color;
      ctx.fillRect(x - 20, y - height, 40, height);
      ctx.fillStyle = "black";
      ctx.font = "bold 12px sans-serif";
      ctx.textAlign = "center";
      ctx.fillText(name, x, y - height - 5);
    }

    // ボール描画
    function drawBall() {
      ctx.fillStyle = "#ffaa00";
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, 15, 0, Math.PI * 2);
      ctx.fill();
    }

    // スコア描画
    function drawScore() {
      ctx.fillStyle = "white";
      ctx.font = "bold 24px sans-serif";
      ctx.textAlign = "left";
      ctx.fillText(`プレイヤー: ${score.player}`, 50, 50);
      ctx.textAlign = "right";
      ctx.fillText(`AI: ${score.ai}`, 750, 50);
    }

    // 更新ロジック
    function update() {
      if (gameState !== "playing") return;

      // プレイヤー移動
      if (keys['ArrowLeft']) player.x = Math.max(30, player.x - player.speed);
      if (keys['ArrowRight']) player.x = Math.min(770, player.x + player.speed);
      if (keys['ArrowUp']) player.y = Math.max(50, player.y - player.speed);
      if (keys['ArrowDown']) player.y = Math.min(450, player.y + player.speed);

      // ボール持ち（プレイヤー）
      if (ball.holder === "player") {
        ball.x = player.x;
        ball.y = player.y - 40;
        if (keys[' ']) { // スペースでシュート
          ball.vx = (Math.random() - 0.5) * 4;
          ball.vy = - (12 + player.shootPower * 0.5);
          ball.holder = null;
          keys[' '] = false;
        }
      }

      // AI簡単移動＆シュート
      if (ball.holder === "ai") {
        ai.x += (ball.x - ai.x) * 0.05;
        if (Math.abs(ai.x - 400) < 100 && Math.random() < 0.02) {
          ball.vx = (Math.random() - 0.5)
