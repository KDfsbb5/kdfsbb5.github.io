<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒªã‚¢ãƒ«ãƒã‚«ã‚¹ãƒˆãƒªãƒ¼ãƒˆãƒœãƒ¼ãƒ« 1on1</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9720843068756495" crossorigin="anonymous"></script>
  <style>
    body { margin: 0; background: linear-gradient(to bottom, #87CEEB 0%, #228B22 100%); overflow: hidden; font-family: sans-serif; }
    canvas { display: block; margin: 20px auto; border: 8px solid #FFD700; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); cursor: none; }
    #ui { position: absolute; top: 20px; left: 20px; right: 20px; color: white; font-size: 32px; text-shadow: 3px 3px 6px black; text-align: center; }
    #char-select { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.9); padding: 30px; border-radius: 30px; text-align: center; color: white; z-index: 100; }
    button { padding: 15px 25px; margin: 10px; background: linear-gradient(#FFD700, #FFA500); border: none; border-radius: 20px; font-size: 20px; cursor: pointer; font-weight: bold; }
    button:hover { transform: scale(1.1); }
  </style>
</head>
<body>
  <canvas id="canvas" width="900" height="600"></canvas>
  <div id="ui">ã‚­ãƒ£ãƒ©é¸æŠä¸­... | ã‚¹ã‚³ã‚¢: 0 - 0 | å…ˆå–15ç‚¹å‹ã¡ï¼</div>
  <div id="char-select">
    <h2 class="text-4xl mb-8">ğŸ€ ã‚­ãƒ£ãƒ©é¸æŠï¼</h2>
    <button onclick="selectChar(0)">âš¡ ãƒãƒ“é€Ÿ (é€Ÿãƒ‰ãƒªãƒ–ãƒ«)</button><br>
    <button onclick="selectChar(1)">ğŸ¯ ã‚¹ãƒŠã‚¤ãƒ‘ãƒ¼å¾Œè—¤ (3Pç¥)</button><br>
    <button onclick="selectChar(2)">âš–ï¸ æ™®é€šãã‚“ (ãƒãƒ©ãƒ³ã‚¹)</button><br>
    <button onclick="selectChar(3)">ğŸ’ª ã‚´ãƒªãƒ©å±±å´ (ãƒ€ãƒ³ã‚¯ç‹)</button>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const ui = document.getElementById('ui');
    const charSelect = document.getElementById('char-select');

    // ã‚­ãƒ£ãƒ©ãƒ‡ãƒ¼ã‚¿ (å¼·åŒ–ç‰ˆ)
    const chars = [
      {name: 'ãƒãƒ“é€Ÿ', speed: 9, jump: 16, shootPower: 14, threePt: 0.5, dunkPower: 0, color: '#FF4444'},
      {name: 'ã‚¹ãƒŠã‚¤ãƒ‘ãƒ¼å¾Œè—¤', speed: 5, jump: 14, shootPower: 22, threePt: 0.85, dunkPower: 0, color: '#44AA44'},
      {name: 'æ™®é€šãã‚“', speed: 6.5, jump: 17, shootPower: 16, threePt: 0.6, dunkPower: 0.3, color: '#4444FF'},
      {name: 'ã‚´ãƒªãƒ©å±±å´', speed: 4, jump: 22, shootPower: 12, threePt: 0.2, dunkPower: 1, color: '#FF8800'}
    ];

    let player = {}, ai = {}, ball = {}, score = {p: 0, a: 0};
    let gameRunning = false, shootCharge = 0, keys = {};

    document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
    document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

    function selectChar(index) {
      player = { ...chars[index], x: 150, y: 450, vx: 0, vy: 0, onGround: true, hasBall: true };
      ai = { ...chars[Math.floor(Math.random() * 4)], x: 700, y: 450, vx: 0, vy: 0, onGround: true, hasBall: false };
      ball = {x: player.x, y: player.y - 40, vx: 0, vy: 0, r: 15, held: true};
      charSelect.style.display = 'none';
      gameRunning = true;
      ui.textContent = `${player.name} vs ${ai.name} | ã‚¹ã‚³ã‚¢: 0 - 0 | å…ˆå–15ç‚¹ï¼`;
      loop();
    }

    function drawCourt() {
      ctx.fillStyle = '#8B4513';
      ctx.fillRect(0, 0, 900, 600);
      ctx.strokeStyle = '#FFF';
      ctx.lineWidth = 6;
      ctx.strokeRect(60, 120, 780, 360);
      ctx.beginPath(); ctx.arc(450, 300, 70, 0, Math.PI*2); ctx.stroke();
      // ãƒªãƒ³ã‚°&ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ‰
      ctx.fillStyle = '#FFD700';
      ctx.fillRect(420, 285, 60, 8); // ãƒªãƒ³ã‚°
      ctx.fillRect(400, 220, 20, 70); // ãƒœãƒ¼ãƒ‰
    }

    function drawChar(p, flip = false) {
      const sx = flip ? -1 : 1;
      ctx.save();
      ctx.scale(sx, 1);
      ctx.fillStyle = p.color;
      ctx.fillRect(Math.abs(p.x - 25), p.y - 70, 50, 70); // ä½“
      ctx.fillStyle = '#FFF';
      ctx.fillRect(Math.abs(p.x - 10), p.y - 50, 20, 20); // é ­
      ctx.fillStyle = '#000';
      ctx.fillRect(Math.abs(p.x - 5), p.y - 45, 4, 4); // ç›®
      ctx.font = 'bold 18px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(p.name, Math.abs(p.x), p.y - 85);
      ctx.restore();
    }

    function drawBall() {
      ctx.fillStyle = '#FFAA00';
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
      ctx.fill();
      ctx.strokeStyle = '#FFF';
      ctx.lineWidth = 3;
      ctx.stroke();
    }

    function updatePlayer() {
      player.vx *= 0.85; // æ‘©æ“¦
      if (keys['arrowleft']) player.vx = -player.speed;
      if (keys['arrowright']) player.vx = player.speed;
      if (keys['arrowup'] && player.onGround) { player.vy = -player.jump; player.onGround = false; }

      // ã‚·ãƒ¥ãƒ¼ãƒˆãƒãƒ£ãƒ¼ã‚¸ (Xã‚­ãƒ¼)
      if (keys['x']) {
        shootCharge = Math.min(shootCharge + 1, 30);
      } else if (shootCharge > 0) {
        ball.vx = (450 - player.x) / 40 + (Math.random() - 0.5) * 2;
        ball.vy = - (player.shootPower + shootCharge * 0.5);
        ball.held = false;
        player.hasBall = false;
        shootCharge = 0;
      }

      // ç‰©ç†
      player.x += player.vx;
      player.y += player.vy;
      player.vy += 1;
      if (player.y >= 450) { player.y = 450; player.vy = 0; player.onGround = true; }
      player.x = Math.max(40, Math.min(860, player.x));

      if (player.hasBall && ball.held) {
        ball.x = player.x;
        ball.y = player.y - 40;
        ball.y += Math.sin(Date.now() / 100) * 2; // ãƒ‰ãƒªãƒ–ãƒ«ãƒã‚¦ãƒ³ãƒ‰
      }
    }

    function updateAI() {
      // AIãƒ­ã‚¸ãƒƒã‚¯å¼·åŒ–
      const dx = player.x - ai.x;
      ai.vx = Math.sign(dx) * ai.speed * 0.6;
      if (Math.random() < 0.01 && ai.hasBall) {
        ball.vx = (450 - ai.x) / 40;
        ball.vy = -ai.shootPower;
        ai.hasBall = false;
        ball.held = false;
      }
      ai.x += ai.vx;
      ai.y += ai.vy;
      ai.vy += 1;
      if (ai.y >= 450) { ai.y = 450; ai.vy = 0; ai.onGround = true; }
      ai.x = Math.max(40, Math.min(860, ai.x));

      if (ai.hasBall && ball.held) ball.x = ai.x;
    }

    function updateBall() {
      if (!ball.held) {
        ball.x += ball.vx;
        ball.y += ball.vy;
        ball.vy += 0.8;
        if (ball.y > 580) {
          ball.y = 580;
          ball.vy *= -0.7;
          ball.vx *= 0.85;
        }

        // ã‚¹ãƒ†ã‚£ãƒ¼ãƒ«åˆ¤å®š
        if (Math.hypot(ball.x - player.x, ball.y - player.y) < 40 && !player.hasBall) player.hasBall = true;
        if (Math.hypot(ball.x - ai.x, ball.y - ai.y) < 40 && !ai.hasBall) ai.hasBall = true;

        // ã‚´ãƒ¼ãƒ«åˆ¤å®š (ãƒªã‚¢ãƒ«)
        if (ball.y > 280 && ball.y < 295 && ball.x > 420 && ball.x < 480 && ball.vy > 0) {
          const is3pt = ball.x < 300 || ball.x > 600;
          const points = is3pt ? 3 : 2;
          const scorer = player.hasBall ? 'p' : 'a';
          score[scorer] += points;
          ui.textContent = `${player.name} vs ${ai.name} | ã‚¹ã‚³ã‚¢: ${score.p} - ${score.a}`;
          if (score.p >=
